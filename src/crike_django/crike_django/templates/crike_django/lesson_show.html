{% extends 'crike_django/lesson_base.html' %}
{% load staticfiles %}

{% block subcontent %}
<script>
  var gotimer = null;
  var done = false;
  $(document).ready(function (){
    $('.step-links').hide()
    $("body").keydown(function(e) {
      if (done) {
        if(e.which == 37) { // left
            var elem = document.getElementById('page_prev');
            if (elem != null)
              window.location = elem.href;
        }
        else if(e.which == 39) { // right
            var elem = document.getElementById('page_next');
            if (elem != null)
              window.location = elem.href;
        }
      }
    });
  });
  function readyGo() {
    $('#notice').hide()
    $('.step-links').show()
    done = true;
    console.log("{{done}}")
    if ("{{done}}" == "True") {
      $('#gototest').show()
    }
  };
  function delayGo() {
      clearTimeout(gotimer);
      var cb = "readyGo()";
      gotimer = setTimeout(cb, 500);
  };
</script>
<label id="notice" style="font-size:200%;float:right;margin-top:5%">所有内容都学完才可以走哦</label>
<div class='jumbotron'>
  {% for word in words %}
  <h1><strong style='font-size:150%'>{{word.name}} </strong> [{{ word.phonetics }}]
    <a onmouseover="delayPlay('/media/audios/{{ word.name }}.mp3');delayGo()"
        onmouseout ="clearTimeout(timer);clearTimeout(gotimer);" 
        onclick="playSound('/media/audios/{{ word.name }}.mp3');readyGo()" 
        title="发音" href="javascript:;"><i class="fa fa-volume-up"></i></a>
    <form id="gototest" style="display:none;" method="get" action="/study/book/{{book}}/lesson/{{lesson}}/pick">
      <input type="submit" class="btn btn-primary btn-lg" value="开始自测">
    </form>
  </h1>
  {% endfor %}
</div>
<div class='row'>
  {% for word in words %}
  <div class="col-md-6 col-lg-6">
    <div class='pin' style="width:100%">
      {% for mean in word.mean %}
      <li style='font-size:200%;margin-left:10px'>{{mean}}</li>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-6 col-lg-6">
    <div class='pin' style="width:100%">
    <!-- Carousel
    ================================================== -->
      <div id="carousel-example-captions" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carousel-example-captions" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-example-captions" data-slide-to="1" class=""></li>
          <li data-target="#carousel-example-captions" data-slide-to="2" class=""></li>
        </ol>
        <div class="carousel-inner" style="height:350px">
          <div class="item active">
            <!-- data-src="holder.js/900x500/auto/#777:#777" -->
            <img alt="900x500" src="/media/images/{{word.name}}/0.jpg">
          </div>
          <div class="item">
            <img alt="900x500" src="/media/images/{{word.name}}/1.jpg">
          </div>
          <div class="item">
            <img alt="900x500" src="/media/images/{{word.name}}/2.jpg">
          </div>
        </div>
        <a class="left carousel-control" href="#carousel-example-captions" data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left"></span>
        </a>
        <a class="right carousel-control" href="#carousel-example-captions" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right"></span>
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
<span id="dummy"></span>
{% endblock %}
